# Проект REST API для системы комментариев блога на Django

## Установка проекта на локальный компьютер

### Отдельно работающие приложение и база данных

1. Должен быть предустановлен менеджер зависимостей `poetry`. Или установите `poetry` любым удобным способом. 
   Например: `curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -`
2. Должен быть предустановлен и работать `Postgresql`
3. Создайте базу данных с юзером и паролем на нужном порту.
4. Выполните клонирование репозитория: `git clone https://github.com/suband74/test_task_django`
5. В файле `settings.py` пропишите необходимые настройки:
    ```python
        DATABASES = {
        "default": {
            "ENGINE": "django.db.backends.postgresql_psycopg2",
            "NAME": "my_db",
            "USER": "hero",
            "PASSWORD" : "my_db123",
            "HOST": "localhost",
            "PORT": "5432",
        }
    }
    ```
6. Затем выполните установку зависимостей проекта: `poetry install`

### В докере

1. Выполните клонирование репозитория: `git clone https://github.com/suband74/test_task_django`
2. В файле `settings.py` активируйте раздел `For docker postgres`
3. Из папки `test_task_django` выполните команду `docker-compose up`
5. Сервер работает на порту 8000

## Реализованы следующие методы API

1. Получение списка статей: метод `GET` адрес:`http://адрес_сервера/api/v1/postslist`

2. Добавление статьи: метод `POST` адрес: `http://адрес_сервера/api/v1/postslist`
   - тело запроса:
   ```json
    {
        "title": "Статья 5"
    }
    ```
3. Получение всех комментариев к статье вплоть до 3 уровня вложенности:
   - метод `GET` адрес:`http://адрес_сервера/api/v1/comments`
   - с дополнительным параметром `post=id статьи`

4. Добавление комментария к статье:
    - метод `POST` адрес: `http://адрес_сервера/api/v1/comments`
    - `"id_kor"` - id_комментария на которую добавляется комментарий
    - `"post"` - id_статьи на которую добавляется комментарий
    - При комментарии на статью обязательно `"id_kor": 0`
    - тело запроса:
   ```json
    {
        "author": "Каракаш",
        "content": "Коммент Каракаша на статью 8",
        "id_kor": 0, 
        "post": 8
    }
    ```
5. Добавление коментария в ответ на другой комментарий (возможна любая вложенность):
    - метод `POST` адрес: `http://адрес_сервера/api/v1/comments`
    - тело запроса:
   ```json
    {
        "author": "Каракаш",
        "content": "Коммент Каракаша на статью 8",
        "id_kor": 15, 
        "post": 8
    }
    ```

## Доступен Swagger по адресу: `http://адрес_сервера/swagger`

#### Для удобства кода использовал

- Линтер [flake8](https://flake8.pycqa.org/en/latest/)
- Форматер [black](https://github.com/)